<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Ramallah Waste Containers</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.locatecontrol/dist/L.Control.Locate.css" />
  <style>
    body { margin: 0; height: 100%; width: 100%; }
    #map { position: absolute; width: 100%; top: 0; bottom: 0; }
    .route-info {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px;
      border-radius: 5px;
      font-size: 14px;
      display: none;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <div class="route-info" id="route-info"></div>

  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://unpkg.com/leaflet-heat/dist/leaflet-heat.js"></script>
  <script src="https://unpkg.com/leaflet.locatecontrol/dist/L.Control.Locate.min.js"></script>

  <script>
    const mapOptions = {
      center: [31.9045, 35.2045],
      zoom: 19,
    };
    const map = L.map("map", mapOptions);

    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; OpenStreetMap & CARTO',
      maxZoom: 20
    }).addTo(map);

    // Load and display your existing layers
    let zonesLayer, wasteContainersLayer, roadsLayer, heatmapLayer;
    // Add your existing map setup code here as it was (zone colors, waste colors, road colors, etc.)

    // Variables for main and selected routes
    let mainRouteLayer, selectedRouteLayer;

    // Function to create the main shortest route between all waste points
    function createMainRoute() {
      const wastePoints = [
        // Example coordinates for waste points (replace with your actual waste point coordinates)
        [31.9045, 35.2045],
        [31.9040, 35.2040],
        [31.9035, 35.2035],
      ];

      const routeOptions = {
        color: 'blue',
        weight: 5,
        opacity: 0.7,
      };

      // Define the main route polyline
      mainRouteLayer = L.polyline(wastePoints, routeOptions).addTo(map);
      mainRouteLayer.on("click", () => showRouteInfo("Main Route", "5 km", "10 mins"));
    }

    // Function to show route information
    function showRouteInfo(type, distance, time) {
      const infoDiv = document.getElementById("route-info");
      infoDiv.innerHTML = `Type: ${type} | Distance: ${distance} | Time: ${time}`;
      infoDiv.style.display = "block";
    }

    // Function to create and display a selected specific route
    function createSelectedRoute() {
      if (mainRouteLayer) map.removeLayer(mainRouteLayer);  // Hide the main route when a specific route is selected

      const selectedRoutePoints = [
        // Example coordinates for selected route points (replace with specific route coordinates)
        [31.9045, 35.2045],
        [31.9041, 35.2041],
      ];

      const selectedRouteOptions = {
        color: 'red',
        weight: 5,
        opacity: 0.9,
      };

      // Define the specific route polyline
      selectedRouteLayer = L.polyline(selectedRoutePoints, selectedRouteOptions).addTo(map);
      selectedRouteLayer.on("click", () => showRouteInfo("Selected Route", "2 km", "5 mins"));
    }

    // Add an event listener to hide route info on map click
    map.on("click", () => {
      const infoDiv = document.getElementById("route-info");
      infoDiv.style.display = "none";
    });

    // Initialize the main route
    createMainRoute();

    // Example: Simulate selecting a specific route after 3 seconds
    setTimeout(() => {
      createSelectedRoute();
    }, 3000);

  </script>
</body>
</html>
